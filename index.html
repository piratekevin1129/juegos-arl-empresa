<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
   
    <!--Jquery-->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
    
    <!--Estilos propios-->
    <link href="assets/css/fonts.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/reset.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/master.css" rel="stylesheet" type="text/css" />
    <!--<link href="assets/css/responsive.css" rel="stylesheet" type="text/css" />-->

    <!--Libreria spider-->
    <link rel="stylesheet" type="text/css" href="assets/spider/sprites/sprite.css" />
    <link rel="stylesheet" type="text/css" href="assets/spider/sprites/fotograma.css" />
    <title>Empresa</title>
</head>
<body>
    <div id="container">
        <header>
            <div class="row row-header1">
                <div class="logo-sura">
                </div>
                <div class="titulo">
                    <h1><span>Módulos Interactivos:</span> Prevención de Riesgos</h1>
                </div>
            </div>
            <div class="row row-header2">
                <div class="logo-arl"></div>
                <div id="oficio-title">
                    <h2 id="oficio-title-txt"></h2>
                </div>
            </div>
        </header>

        <div id="game">
        	<div id="game-scene">
        		<div id="piso-container">
        			<div id="piso"></div>
        			<div id="paredes"></div>
	        		<!--<div id="puertas"></div>
	        		<div id="elementos"></div>-->
        		</div>
        		
        		<div id="avatar">
        			<div id="avatar-clip" class="spd_sprite" width="30" height="28" frames="13" src="assets/images/avatar_sprite.png"></div>
        			<div id="mensaje" class="mensaje-off"></div>
        		</div>
        		
        		<div id="contenedor-item" class="contenedor-item-off">
        			<div class="contenedor-item-img"></div>
        			<h1 id="contenedor-item-title"></h1>
        			<div id="contenedor-item-content">
        				<div id="llave-animada" class="spd_sprite" width="182" height="240" frames="21" src="assets/images/llave_animada_sprite.png"></div>
        				<div id="premio-animado" class="spd_sprite" width="220" height="248" frames="21" src="assets/images/premio_animado_sprite.png"></div>
        			</div>
        			<p id="contenedor-item-msg"></p>
        		</div>

        	</div>
        	<div id="home-scene">
        		<div class="fondo">
        			<div class="cielo"></div>
        			<div class="nubes"></div>
        		</div>
                <div id="personaje-home" class="personaje-1"><div class="personaje-ojos"></div></div>
            </div>
        </div>

        <div id="modal" class="modal-on">
            <div id="personaje-2" class="personaje-off">
                <div id="personaje-main-2"><div class="personaje-ojos"></div></div>
                <div id="personaje-ropas-2"></div>
            </div>
            <div id="modal-box">
                <button id="modal-close-btn"></button>
                <h2 id="modal-title">Instrucciones</h2>
                <div id="modal-content">
                </div>
                <button id="modal-button">jugar</button>
            </div>
        </div>

        <div id="focus-msg" class="focus-off" onclick="focusOn()">
        	<p>Haz clic para continuar con el juego</p>
        </div>
        <div id="cargador" class="cargador-on">
            <div class="cargador-img"></div>
            <div class="cargador-txt">Cargando...</div>
        </div>
    </div>

<script src="assets/spider/sprites/sprite.js"></script>
<script src="assets/spider/sprites/fotograma.js"></script>

<script src="assets/data.js"></script>
<script src="assets/js/paredes.js"></script>
<script src="assets/js/mobile.js"></script>
<script src="assets/js/modal.js"></script>
<script src="assets/js/game.js"></script>
<script>

var underground_mp3 = null
var boton_mp3 = null

var animation_start = null
window.onload = function(){
	loadAudio({src:'assets/media/boton.mp3',callBack:function(data){
	boton_mp3 = data
    loadAudio({src:'assets/media/underground.mp3',callBack:function(data){
    underground_mp3 = data
    underground_mp3.addEventListener('ended',function(){underground_mp3.play()},false)

	    //cargar sprites del avatar, la llave y el premio
	    spdLoadSprite({idname:'avatar-clip',autoplay:'off',callBack:function(){	
		spdLoadSprite({idname:'llave-animada',autoplay:'off',callBack:function(){
		spdLoadSprite({idname:'premio-animado',autoplay:'off',callBack:function(){

			spdCreateAnimation({id:0,sprite:'avatar-clip'})
			spdCreateAnimation({id:1,sprite:'llave-animada'})
			spdCreateAnimation({id:2,sprite:'premio-animado'})

			prepareWindow()
	        setGame()
		}})
		}})
		}})

    }})
    }})
}
    
</script>

</body>
</html>