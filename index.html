<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
   
    <!--Jquery-->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
    
    <!--Estilos propios-->
    <link href="assets/css/fonts.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/reset.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/master.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/escenarios.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/instrucciones.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/responsive.css" rel="stylesheet" type="text/css" />

    <!--Libreria spider-->
    <link rel="stylesheet" type="text/css" href="assets/spider/sprites/sprite.css" />
    <link rel="stylesheet" type="text/css" href="assets/spider/sprites/fotograma.css" />
    <title>Empresa</title>
</head>
<body>
    <div id="container">
        <header>
            <div class="row row-header1">
                <div class="logo-sura">
                </div>
                <div class="titulo">
                    <h1><span>Módulos Interactivos:</span> Prevención de Riesgos</h1>
                </div>
            </div>
            <div class="row row-header2">
                <div class="logo-arl"></div>
                <div id="oficio-title">
                    <h2 id="oficio-title-txt"></h2>
                </div>
            </div>
        </header>

        <div id="game">
        	<div id="game-scene">
        		<div id="piso-container">
        			<div id="piso"></div>
        			<div id="paredes"></div>
	        		<!--<div id="puertas"></div>
	        		<div id="elementos"></div>-->
        		</div>
        		
        		<div id="avatar">
        			<div id="avatar-clip" class="spd_sprite" width="30" height="28" frames="13" src="assets/images/avatar_sprite.png"></div>
        			<div id="mensaje" class="mensaje-off"></div>
        		</div>

                <div id="contenedor-peliculas" style="display: none">
                    <video id="pelicula" width="780" height="516"></video>
                    <div id="contenedor-peliculas-alfa"></div>
                    <div id="contenedor-peliculas-cargador"></div>
                </div>

                <div id="contenedor-preguntas" style="display: none">
                    <div id="contenedor-preguntas-iframe">
                        <div id="contenedor-preguntas-1" class="contenedor-preguntas-hidden">
                            <div class="contenedor-preguntas-fondo"></div>
                            <div class="burbuja-texto burbuja-texto-off" id="burbuja-texto-pregunta1"></div>
                        </div>

                        <div id="contenedor-preguntas-2" class="contenedor-preguntas-hidden">
                            <div class="contenedor-preguntas-fondo"></div>
                            <div class="burbuja-texto-big burbuja-texto-big-off" id="burbuja-texto-pregunta2"></div>
                            <div id="opcion-a">
                                <div id="opcion-a-pregunta" class="spd_sprite" width="188" height="255" frames="11" src="assets/images/pregunta2/opcion_a_sprite.png"></div>
                                <button id="opcion_a_btn" onclick="clickOpcion(1,this)" onmouseover="overOpciona()" onmouseout="outOpciona()"></button>
                            </div>
                            <div id="opcion-b">
                                <div id="opcion-b-pregunta" class="spd_sprite" width="290" height="260" frames="11" src="assets/images/pregunta2/opcion_b_sprite.png"></div>
                                <button id="opcion_b_btn" onclick="clickOpcion(2,this)" onmouseover="overOpcionb()" onmouseout="outOpcionb()"></button>
                            </div>
                        </div>

                        <div id="contenedor-preguntas-3" class="contenedor-preguntas-hidden">
                            <div class="contenedor-preguntas-fondo"></div>
                            <div class="burbuja-texto-big burbuja-texto-big-off" id="burbuja-texto-pregunta3"></div>
                        </div>

                        <div id="contenedor-preguntas-4" class="contenedor-preguntas-hidden">
                            <div class="contenedor-preguntas-fondo"></div>
                            
                            <div id="personaje">
                                <div id="personaje-main" class="personaje-1"><div class="personaje-ojos"></div></div>
                                <div id="personaje_areas"></div>
                                <div id="personaje_ropas"></div>
                            </div>
                            <button id="ver-pregunta-btn" onclick="verPreguntaContenedor4()">Ver pregunta</button>

                            <div id="elementos-epp"></div>
                                
                            <div class="burbuja-texto-big burbuja-texto-big-off" id="burbuja-texto-pregunta4"></div>
                            <div id="elemento-epp-move" class="elemento-epp-move-off"></div>

                            <div id="contenedor-mensaje-alerta" class="contenedor-mensaje-alerta-off">
                                <div id="contenedor-mensaje-alerta-box"></div>
                            </div>
                        </div>

                        <div id="contenedor-preguntas-5" class="contenedor-preguntas-hidden">
                            <div id="contenedor-preguntas-video">
                                <div class="cielo"></div>
                                <div class="nubes"></div>
                                <div class="contenedor-preguntas-fondo"></div>
                                <div class="personajes-corriendo-patio">
                                    
                                    <div id="personaje-corriendo-1" class="spd_sprite" width="88" height="193" frames="20" src="assets/images/pregunta5/personaje_corriendo_1_sprite.png"></div>
                                    <div id="personaje-corriendo-4" class="spd_sprite" width="147" height="172" frames="16" src="assets/images/pregunta5/personaje_corriendo_4_sprite.png"></div>
                                    <div id="personaje-corriendo-2" class="spd_sprite" width="105" height="240" frames="24" src="assets/images/pregunta5/personaje_corriendo_2_sprite.png"></div>
                                    <div id="personaje-corriendo-3" class="spd_sprite" width="114" height="245" frames="24" src="assets/images/pregunta5/personaje_corriendo_3_sprite.png"></div>
                                    
                                </div>
                                <!--<video id="contenedor-preguntas-video-5"></video>-->
                            </div>
                            <div id="alarma-pregunta-5">
                                <div id="alarma" class="spd_sprite" width="130" height="90" frames="11" src="assets/images/pregunta5/sirena_sprite.png"></div>
                                <div id="alarma_btn" style="display: none;"></div>
                            </div>
                            <div class="burbuja-texto-big burbuja-texto-big-off" id="burbuja-texto-pregunta5"></div>
                        </div>

                        <div id="contenedor-preguntas-6" class="contenedor-preguntas-hidden">
                            <div class="cielo"></div>
                            <div class="nubes"></div>
                            <div class="contenedor-preguntas-fondo"></div>
                            <div class="burbuja-texto-big burbuja-texto-big-off" id="burbuja-texto-pregunta6"></div>
                        </div>
                    </div>
                    
                    <div id="ruleta" class="ruleta-off">
                        <div id="ruleta-img"></div>
                        <div id="ruleta-pointer"></div>
                    </div>

                    <div id="contenedor-carta" class="contenedor-carta-off">
                        <div id="carta-wrap" class="carta-off">
                            <div id="carta" class="carta-back">
                                <div id="carta-content">
                                    <div class="carta-enunciado">
                                        <p>Hola</p>
                                    </div>
                                    
                                    <div class="carta-respuesta" onclick="clickRespuesta(1)">
                                        <p><span>A)</span>Respuesta 1</p>
                                    </div>
                                    <div class="carta-respuesta" onclick="clickRespuesta(1)">
                                        <p><span>B)</span>Respuesta 2</p>
                                    </div>
                                    <div class="carta-respuesta" onclick="clickRespuesta(1)">
                                        <p><span>C)</span>Respuesta 3</p>
                                    </div>    
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="contenedor-preguntas-alfa"></div>
                    <div id="contenedor-preguntas-cargador"></div><!--cargador solo para videos-->
                </div>

                <div id="estadisticas" class="estadisticas-off">
                    <button id="estadisticas-icon" onclick="toggleEstadisticas()"></button>
                    <div id="trophy1" class="trophy-off">
                        <div></div>
                    </div>
                    <div id="trophy2" class="trophy-off">
                        <div></div>
                    </div>
                    <div id="trophy3" class="trophy-off">
                        <div></div>
                    </div>
                    <div id="trophy4" class="trophy-off">
                        <div></div>
                    </div>
                    <div id="trophy5" class="trophy-off">
                        <div></div>
                    </div>
                    <div id="trophy6" class="trophy-off">
                        <div></div>
                    </div>
                </div>
                <button id="music-btn" class="music-on" onclick="clickAudio(this)"></button>

                <div id="contenedor-item" style="display: none;" class="contenedor-item-off">
                    <div class="contenedor-item-img"></div>
                    <div id="contenedor-item-title"></div>
                    <div id="contenedor-item-content">
                        <div id="llave-animada" class="spd_sprite" width="182" height="240" frames="21" src="assets/images/llave_animada_sprite.png"></div>
                        <div id="premio-animado" class="spd_sprite" width="220" height="248" frames="21" src="assets/images/premio_animado_sprite.png"></div>
                    </div>
                    <div id="contenedor-item-msg"></div>
                </div>
        	</div>
        	<div id="home-scene">
                <div class="cielo"></div>
                <div class="nubes"></div>
        		<div class="fondo"></div>
                <div id="personaje-home" class="personaje-1"><div class="personaje-ojos"></div></div>
            </div>
        </div>

        <div id="modal" class="modal-on">
            <div id="modal-box">
                <button id="modal-close-btn"></button>
                <h2 id="modal-title">Instrucciones</h2>
                <div id="modal-content">
                    <div id="instrucciones-wrapper">
                        <div id="instrucciones-wrap" class="instrucciones-wrap-left-1">
                            <div class="instrucciones-wrap-page">
                                <p class="modal-content-p">Mueve al personaje por toda la empresa con las teclas de dirección</p>
                                <div class="instrucciones-graph-1">
                                    <div class="instrucciones-graph-piso"></div>
                                    <div class="instrucciones-avatar-gif"></div>
                                </div>
                                <div class="instrucciones-keyboard">
                                    <div id="instrucciones-tecla-1" class="instrucciones-tecla"></div>
                                    <div id="instrucciones-tecla-2" class="instrucciones-tecla"></div>
                                    <div id="instrucciones-tecla-3" class="instrucciones-tecla"></div>
                                    <div id="instrucciones-tecla-4" class="instrucciones-tecla"></div>
                                </div>
                            </div>
                            <div class="instrucciones-wrap-page">
                                <p class="modal-content-p">Reúnete con los funcionarios y contesta las preguntas que te hagan para ganar llaves y abrir las puertas de las oficinas</p>
                                <div class="instrucciones-graph-3">
                                    <video id="video-instrucciones-2" loop width="284" height="252">
                                        <source src="assets/animations/instrucciones-2.mp4" type="video/mp4" />
                                    </video>
                                </div>
                            </div>
                            <div class="instrucciones-wrap-page">
                                <p class="modal-content-p">Reune los 5 premios que hay en los <span>2</span> pisos del edificio</p>
                                <div class="instrucciones-graph-4">
                                    <div class="instrucciones-graph-piso"></div>
                                    <div class="instrucciones-graph-premio">
                                        <div class="instrucciones-graph-premio-shadow"></div>
                                        <div class="instrucciones-graph-premio-trophy"></div>
                                    </div>
                                    <div class="instrucciones-avatar-gif"></div>
                                    <div class="instrucciones-graph-copa">
                                        <img src="assets/images/trophy.png" />
                                        <p>!Muy bien!</p>
                                    </div>
                                </div>
                            </div>
                            <div class="instrucciones-wrap-page">
                                <p class="modal-content-p">Cuando hayas reunido todos los premios y las <span>llaves del auto</span>. Dirígete al auto que está en el parqueadero del edificio para terminar el juego</p>
                                <div class="instrucciones-graph-5">
                                    <video id="video-instrucciones-5" loop width="284" height="252">
                                        <source src="assets/animations/instrucciones-5.mp4" type="video/mp4" />
                                    </video>
                                </div>
                            </div>
                            
                        </div>
                        <button id="instrucciones-next-btn" onclick="nextInstrucciones()"></button>
                        <button id="instrucciones-prev-btn" onclick="prevInstrucciones()"></button>
                    </div>
                </div>
                <button id="modal-button">jugar</button>
            </div>
        </div>

        <div id="focus-msg" class="focus-off" onclick="focusOn()">
        	<p>Haz clic para continuar con el juego</p>
        </div>
        <div id="cargador" class="cargador-on">
            <div class="cargador-img"></div>
            <div id="cargador-txt">Cargando...</div>
        </div>
    </div>

<script src="assets/spider/sprites/sprite.js"></script>
<script src="assets/spider/sprites/fotograma.js"></script>

<script src="assets/data.js"></script>
<script src="assets/js/paredes.js"></script>
<script src="assets/js/mobile.js"></script>
<script src="assets/js/modal.js"></script>
<script src="assets/js/game.js"></script>
<script src="assets/js/escenarios.js"></script>
<script>

var underground_mp3 = null
var boton_mp3 = null
var ruleta_cae_mp3 = null
var ruleta_rodando_mp3 = null
var ruleta_fin_mp3 = null
var puerta_con_llave_mp3 = null
var respuesta_correcta_mp3 = null
var respuesta_incorrecta_mp3 = null
var voltear_carta_mp3 = null
var estadisticas_show_mp3 = null
var ganar_premio_mp3 = null
var sirena_mp3 = null

var animation_start = null
window.onload = function(){
	loadAudio({src:'assets/media/boton.mp3',callBack:function(data){
    boton_mp3 = data
    setCargadorText(true)
    loadAudio({src:'assets/media/ruleta_rodando.mp3',callBack:function(data){
    ruleta_rodando_mp3 = data
    setCargadorText(true)
    loadAudio({src:'assets/media/ruleta_cae.mp3',callBack:function(data){
    ruleta_cae_mp3 = data
    setCargadorText(true)
    loadAudio({src:'assets/media/ruleta_fin.mp3',callBack:function(data){
    ruleta_fin_mp3 = data
    setCargadorText(true)
    loadAudio({src:'assets/media/puerta_con_llave.mp3',callBack:function(data){
    puerta_con_llave_mp3 = data
    setCargadorText(true)
    loadAudio({src:'assets/media/respuesta_correcta.mp3',callBack:function(data){
    respuesta_correcta_mp3 = data
    setCargadorText(true)
    loadAudio({src:'assets/media/respuesta_incorrecta.mp3',callBack:function(data){
    respuesta_incorrecta_mp3 = data
    setCargadorText(true)
    loadAudio({src:'assets/media/voltear_carta.mp3',callBack:function(data){
    voltear_carta_mp3 = data
    setCargadorText(true)
    loadAudio({src:'assets/media/estadisticas_show.mp3',callBack:function(data){
    estadisticas_show_mp3 = data
    setCargadorText(true)
    loadAudio({src:'assets/media/ganar_premio.mp3',callBack:function(data){
    ganar_premio_mp3 = data
    setCargadorText(true)
    loadAudio({src:'assets/media/sirena.mp3',callBack:function(data){
    sirena_mp3 = data
    setCargadorText(true)
    

    loadAudio({src:'assets/media/underground.mp3',callBack:function(data){
    underground_mp3 = data
    setCargadorText(true)
    underground_mp3.addEventListener('ended',function(){underground_mp3.play()},false)

        //cargar imagenes (lados de la carta y de la ruleta)
        loadImage({url:'assets/images/carta-1.png',callBack:function(){
        setCargadorText(true)
        loadImage({url:'assets/images/carta-2.png',callBack:function(){
        setCargadorText(true)
        loadImage({url:'assets/images/ruleta-split-2.png',callBack:function(){
        setCargadorText(true)
        loadImage({url:'assets/images/ruleta-split-3.png',callBack:function(){
        setCargadorText(true)
        loadImage({url:'assets/images/ruleta-split-4.png',callBack:function(){
        setCargadorText(true)

        //fondos de los escenarios, y de victoria
        loadImage({url:'assets/images/pregunta1/fondo.jpg',callBack:function(){
        loadImage({url:'assets/images/pregunta2/fondo.jpg',callBack:function(){
        loadImage({url:'assets/images/pregunta3/fondo.jpg',callBack:function(){
        loadImage({url:'assets/images/pregunta4/fondo.jpg',callBack:function(){
        loadImage({url:'assets/images/pregunta5/fondo.png',callBack:function(){
        loadImage({url:'assets/images/pregunta6/fondo.png',callBack:function(){
        loadImage({url:'assets/images/fondo-premios.jpg',callBack:function(){
        setCargadorText(true)
        
    	    //cargar sprites del avatar, la llave y el premio
    	    spdLoadSprite({idname:'avatar-clip',autoplay:'off',callBack:function(){	
            setCargadorText(true)
    		spdLoadSprite({idname:'llave-animada',autoplay:'off',callBack:function(){
            setCargadorText(true)
    		spdLoadSprite({idname:'premio-animado',autoplay:'off',callBack:function(){
            setCargadorText(true)

                //sprites de preguntas 3 y 5
                spdLoadSprite({idname:'opcion-a-pregunta',autoplay:'off',callBack:function(){
                setCargadorText(true)
                spdLoadSprite({idname:'opcion-b-pregunta',autoplay:'off',callBack:function(){
                setCargadorText(true)
                spdLoadSprite({idname:'alarma',autoplay:'off',callBack:function(){
                setCargadorText(true)
                spdLoadSprite({idname:'personaje-corriendo-1',autoplay:'off',callBack:function(){
                setCargadorText(true)
                spdLoadSprite({idname:'personaje-corriendo-2',autoplay:'off',callBack:function(){
                setCargadorText(true)
                spdLoadSprite({idname:'personaje-corriendo-3',autoplay:'off',callBack:function(){
                setCargadorText(true)
                spdLoadSprite({idname:'personaje-corriendo-4',autoplay:'off',callBack:function(){
                setCargadorText(null,'100%')

        			spdCreateAnimation({id:0,sprite:'avatar-clip'})
        			spdCreateAnimation({id:1,sprite:'llave-animada'})
        			spdCreateAnimation({id:2,sprite:'premio-animado'})

                    spdCreateAnimation({id:3,sprite:'opcion-a-pregunta'})
                    spdCreateAnimation({id:4,sprite:'opcion-b-pregunta'})
                    spdCreateAnimation({id:5,sprite:'alarma'})

                    spdCreateAnimation({id:6,sprite:'personaje-corriendo-1'})
                    spdCreateAnimation({id:7,sprite:'personaje-corriendo-2'})
                    spdCreateAnimation({id:8,sprite:'personaje-corriendo-3'})
                    spdCreateAnimation({id:9,sprite:'personaje-corriendo-4'})

        			prepareWindow()
        	        setGame()

                }})
                }})
                }})
                }})
                }})
                }})
                }})
    		}})
    		}})
    		}})

        }})
        }})
        }})
        }})
        }})
        }})
        }})

        }})
        }})
        }})
        }})
        }})

    }})
    }})
    }})
    }})
    }})
    }})
    }})
    }})
    }})
    }})
    }})
    }})
}

var toggle_audio = true
function clickAudio(btn){
	if(btn.className=='music-on'){
		underground_mp3.volume = 0
        btn.className = 'music-off'
        toggle_audio = false
	}else{
		underground_mp3.volume = 1
        btn.className = 'music-on'
        toggle_audio = true
	}
}
var loader_cont = Math.round((100/28))
var loader_counter = 1
function setCargadorText(load,txt){
    var t = ''
    if(load!=null&&load!=undefined){
        t = (loader_counter*loader_cont)+'%'
        loader_counter++
    }else{
        t = txt
    }
    getE('cargador-txt').innerHTML = String(t)
}
    
</script>

</body>
</html>